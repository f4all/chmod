<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.07 [en] (X11; I; Linux 2.0.36 i586) [Netscape]">
   <META NAME="AUTHOR" CONTENT="Victor Gonzalez-Barbone">
   <META NAME="CREATED" CONTENT="19990225;10362500">
   <META NAME="CHANGEDBY" CONTENT="Victor Gonzalez-Barbone">
   <META NAME="CHANGED" CONTENT="19990225;10362500">
<STYLE>
	<!--
		@page { margin-left: 2.50cm; margin-right: 1.50cm; margin-top: 1.50cm; margin-bottom: 1.50cm }
	-->
	</STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000EF" VLINK="#51188E" ALINK="#FF0000">

<H5>
Centro de Inform&aacute;tica<BR>
Sistemas Operativos II</H5>

<CENTER>
<H2>
Examen Diciembre 1999.</H2></CENTER>

<CENTER><B>Soluci&oacute;n de scripts.</B></CENTER>

<BR>&nbsp;
<H3>
<FONT SIZE=+1>Parte A. Sin consulta de material (24 puntos).</FONT></H3>

<DT>
Responder brevemente las siguientes preguntas (4 puntos cada una).</DT>

<DT>
</DT>

<DT>
<B>1.</B> Diferenciar los caracteres "|", "\", "/" y ";" en el shell, indicando
para qu&eacute; se usa cada uno.</DT>

<DT>
</DT>

<DT>
<B>2.</B>&nbsp; Indicar los modos del editor vi , qu&eacute; puede hacerse
en cada uno, y c&oacute;mo se pasa de uno a otro.</DT>

<DT>
</DT>

<DT>
Escribir comandos para realizar las tareas indicadas:</DT>

<DT>
</DT>

<DT>
<B>1.</B> Fijar permisos de ejecuci&oacute;n para todos, lectura y modificaci&oacute;n
para el due&ntilde;o, lectura para el grupo, en el archivo <TT>vlub</TT>.
Hacerlo en modo simb&oacute;lico y en modo absoluto.</DT>

<DT>
</DT>

<DT>
<B>2.</B> Fijar los permisos del directorio <TT>yugo</TT> de modo que todos
puedan ejecutar los programas contenidos en &eacute;l, pero s&oacute;lo
pueda verlos y modificarlos el due&ntilde;o del directorio.</DT>

<DT>
</DT>

<DT>
<B>3.</B> Mostrar la ruta completa hacia el ejecutable<TT> dondestoy</TT>.</DT>

<DT>
</DT>

<DT>
<B>4.</B> Buscar, en el directorio actual y en todos los subdirectorios,
un archivo de nombre <TT>core</TT>.</DT>

<H3>
<FONT SIZE=+1>Parte B.&nbsp;Con libre consulta de material (76 puntos).</FONT></H3>

<DT>
<FONT SIZE=+2>1.</FONT> El comando <TT>last</TT> muestra una l&iacute;nea
por cada login:</DT>

<DT>
<TT>&nbsp;&nbsp;victor&nbsp;&nbsp; :0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
console&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Fri Dec 17
15:57&nbsp;&nbsp; still logged in</TT></DT>

<DT>
<TT>&nbsp;&nbsp;reboot&nbsp;&nbsp; system boot&nbsp; 2.0.36&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Fri Dec 17 15:57&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(00:51)</TT></DT>

<DT>
<TT>&nbsp;&nbsp;victor&nbsp;&nbsp; :0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
console&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Sat Dec&nbsp;
4 19:53 - 20:21&nbsp; (00:27)</TT></DT>

<DT>
<TT>&nbsp;&nbsp;victor&nbsp;&nbsp; :0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
console&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Sat Dec&nbsp;
4 19:31 - 19:53&nbsp; (00:22)</TT></DT>

<DT>
<TT>&nbsp;&nbsp;cristina :0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
console&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Sat Dec&nbsp;
4 19:17 - 19:31&nbsp; (00:13)</TT></DT>

<DT>
<TT>&nbsp;&nbsp;victor&nbsp;&nbsp; :0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
console&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Sat Dec&nbsp;
4 15:08 - 15:10&nbsp; (00:01)</TT></DT>

<DT>
En el primer campo&nbsp; (columnas 1 a 9, incluyendo espacios al final)
est&aacute; el nombre del usuario; en el &uacute;ltimo campo, encerrado
entre par&eacute;ntesis, est&aacute; el tiempo de conexi&oacute;n de ese
usuario (columnas 67 a 71, formato hh:mm).&nbsp; Crear un archivo <TT>horas.tmp</TT>
con el siguiente formato:</DT>

<DT>
<TT>&nbsp;&nbsp;reboot:8:51</TT></DT>

<DT>
<TT>&nbsp;&nbsp;cristina:04:07</TT></DT>

<DT>
<TT>&nbsp;&nbsp;victor:06:00</TT></DT>

<DT>
<TT>&nbsp;&nbsp;victor:10:19</TT></DT>

<DT>
<TT>&nbsp;&nbsp;cristina:00:13</TT></DT>

<DT>
<TT>&nbsp;&nbsp;reboot:18:01</TT></DT>

<DT>
(14 puntos)</DT>

<DT>
<BR>
<FONT SIZE=+2>2.</FONT> El archivo horas.tmp contiene informaci&oacute;n
de tiempo de login de los usuarios. Sus campos son, en este orden: nombre
de login, horas de conexi&oacute;n, minutos de conexi&oacute;n. El separador
es :. El archivo contiene registros en desorden de muchos usuarios. Escribir
un script que acumule el tiempo de conexi&oacute;n por usuario, y presente
una salida de la forma</DT>

<DT>
<TT>&nbsp;&nbsp;Nombre: cristina - horas: 0, minutos: 22</TT></DT>

<DT>
<TT>&nbsp;&nbsp;Nombre: reboot - horas: 76, minutos: 0</TT></DT>

<DT>
<TT>&nbsp;&nbsp;Nombre: root - horas: 3, minutos: 54</TT></DT>

<DT>
<TT>&nbsp;&nbsp;Nombre: victor - horas: 53, minutos: 21</TT></DT>

<DT>
Se deber&aacute; extraer de la suma de minutos, las horas enteras, sum&aacute;ndolas
al conteo de horas, mostrando el resto de minutos (operador % en <TT>expr</TT>).</DT>

<BR><TT>(26 puntos)</TT>
<DT>
<BR>
<FONT SIZE=+2>3.</FONT> Para establecer una conexi&oacute;n PPP v&iacute;a
modem, se dispone del comando <TT>pon uruguaynet</TT>; luego de esperar
30 segundos, la conexi&oacute;n estar&aacute; establecida. Para cortarla,
se usa el comando <TT>poff</TT>. Inmediatamente que se establece la conexi&oacute;n,
se activa el agente de transporte de correo <TT>exim</TT>, para enviar
los correos en cola, un proceso que puede demorar un tiempo indeterminado.
Escribir un script que inicie la conexi&oacute;n, esperre que se establezca,
emita el comando <TT>fetchmail </TT>para traer los correos en el servidor
remoto, y corte la conexi&oacute;n luego de asegurarse que el proceso <TT>exim</TT>
haya finalizado. Si el proceso <TT>exim</TT> a&uacute;n est&aacute; corriendo,
se debe esperar 10 segundos, tantas veces como sea necesario.</DT>

<DT>
<B>Sugerencia:</B> el comando <TT>ps -ax</TT> muestra los procesos corriendo.
Notar que si se usa <TT>grep</TT>, este proceso tambi&eacute;n puede estar
en la salida de <TT>ps</TT>.</DT>

<DT>
(18 puntos)</DT>

<DT>
</DT>

<DT>
<FONT SIZE=+2>4.</FONT> Una empresa usa el campo de comentario de /etc/passwd
(campo 5) para guardar informaci&oacute;n de sus usuarios: nombre en la
vida real, tel&eacute;fono interno en la empresa, direcci&oacute;n particular,
tel&eacute;fono particular. Estos campos est&aacute;n separados por ",".
Escribir un script que pregunte al usuario un nombre de login y muestre
los datos del usuario, o un mensaje indicando que el usuario no existe.
El formato ser&aacute; similar a &eacute;ste:</DT>

<DT>
</DT>

<BR><TT>&nbsp; Nombre: victor</TT>
<BR><TT>&nbsp; Nombre real:&nbsp; V&iacute;ctor Gonz&aacute;lez-Barbone</TT>
<BR><TT>&nbsp; Interno:&nbsp; 114</TT>
<BR><TT>&nbsp; Direcci&oacute;n:&nbsp; J.Su&aacute;rez 3023 bis ap. 801</TT>
<BR><TT>&nbsp; Tel&eacute;fono:&nbsp; 2096368</TT><TT></TT>
<P>(18 puntos)
<BR><TT></TT>&nbsp;
</BODY>
</HTML>
