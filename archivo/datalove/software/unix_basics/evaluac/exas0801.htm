<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta http-equiv="CONTENT-TYPE" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.76 [en] (X11; U; Linux 2.2.18pre21 i686) [Netscape]">
   <meta name="AUTHOR" content="Víctor González Barbone">
   <meta name="CREATED" content="20001220;19120600">
   <meta name="CHANGEDBY" content="Víctor González Barbone">
   <meta name="CHANGED" content="20001220;21174800">
<style>
	<!--
		@page { size: 8.27in 11.69in; margin-left: 0.8in; margin-right: 0.8in; margin-top: 0.58in; margin-bottom: 0.58in }
	-->
	</style>
</head>
<body text="#000000" bgcolor="#FFFFFF" link="#0000EF" vlink="#51188E" alink="#FF0000">

<h5>
Centro de Inform&aacute;tica<br>
Sistemas Operativos II</h5>

<center>
<h2>
Examen Agosto 2001.</h2></center>

<div STYLE="margin-bottom: 0in">
<div STYLE="margin-bottom: 0in">
<h3>
A. Sin consulta de material (30 puntos).</h3>

<dt>
Responder brevemente las siguientes preguntas<font face="Times, serif">.</font></dt>

<dt>
&nbsp;</dt>

<dt>
<font face="Times, serif"><b>1.</b>&nbsp; &iquest;Para qu&eacute; sirve
el comando </font><tt>apropos</tt><font face="Times, serif">? Dar un ejemplo
de uso.</font></dt>

<dt>
&nbsp;</dt>

<dt>
<font face="Times, serif"><b>2.</b> &iquest;Qu&eacute; significa el permiso
"s" para el due&ntilde;o de un archivo?</font></dt>

<dt>
&nbsp;</dt>

<dt>
<font face="Times, serif"><b>3.</b> &iquest;Qu&eacute; contiene la variable
PATH?</font></dt>

<dt>
&nbsp;</dt>
</div>

<div STYLE="margin-bottom: 0in; font-weight: medium">
<dt>
<font face="Times, serif"><font size=+0>Escribir comandos para realizar
las tareas indicadas:</font></font></dt>

<dt>
&nbsp;</dt>

<dt>
<font face="Times, serif"><font size=+0><b>4.</b> Enviar un correo al usuario
carletto del dominio nsk.com.uy, con t&iacute;tulo "Desayuno de trabajo".
El texto del mensaje est&aacute; en el archivo invitacion.txt.</font></font></dt>

<dt>
&nbsp;</dt>

<dt>
<font face="Times, serif"><font size=+0><b>5.</b> Pedir al sistema informaci&oacute;n
sobre el usuario carletto. Si conoce m&aacute;s de un comando, indicarlos
todos.</font></font></dt>

<dt>
&nbsp;</dt>

<dt>
<font face="Times, serif"><font size=+0><b>6.</b> Mostrar los archivos
del directorio /usr/doc/HOWTO a) en listado breve; b) en listado largo;
c) incluyendo archivos ocultos; d) en listado largo e incluyendo archivos
ocultos.</font></font></dt>

<dt>
&nbsp;</dt>

<dt>
<font face="Times, serif"><font size=+0><b>7.</b> Listar, del directorio
/usr/share, s&oacute;lo los subdirectorios (no los archivos), en formato
largo.</font></font></dt>

<dt>
&nbsp;</dt>

<dt>
<font face="Times, serif"><font size=+0><b>8.</b>&nbsp; Listar las caracter&iacute;sticas
del directorio /var/spool/mail (no su contenido) y agregar esta l&iacute;nea
al final del archivo logdirs.txt.</font></font></dt>

<dt>
&nbsp;</dt>

<dt>
<font face="Times, serif"><font size=+0><b>9.</b> Desplegar en forma sucesiva
y paginada, las primeras 3 lineas de los archivos de nombre empezado con
"aba" y terminado con ".log" del directorio /var/log/otros.</font></font></dt>

<dt>
&nbsp;</dt>

<dt>
<font face="Times, serif"><font size=+0><b>10.</b> Ejecutar el comando
nsk del directorio /usr/local/bin de modo que tome su entrada del archivo
datos del directorio del usuario jperez en /home, grabe su salida en el
archivo jperez.dts del directorio actual y los errores en jperez.errs del
directorio actual.</font></font></dt>

<dt>
<font face="Times, serif"><font size=+0>&nbsp;</font></font></dt>
</div>

<h3>
B. Con libre consulta de material.</h3>
</div>

<div STYLE="margin-bottom: 0in">
<dt>
<font size=+2>1.</font>&nbsp; El archivo /var/log/access.log registra los
accesos desde la red interna hacia p&aacute;ginas web en l&iacute;neas
similares a &eacute;stas:</dt>

<dt>
<tt>&nbsp; May 09 17:42:56 [2104]: now accepting connections.</tt></dt>

<dt>
<tt>&nbsp; May 09 18:12:48 [2104]: Connect: tisanuro.nsk.com.uy [192.168.1.1]</tt></dt>

<dt>
<tt>&nbsp; May 09 18:12:48 [2104]: Request: GET http://www.intercanal.com/
HTTP/1.0</tt></dt>

<dt>
<tt>&nbsp; May 09 18:12:52 [2104]: Connect: nautilus.nsk.com.uy [192.168.1.2]</tt></dt>

<dt>
<tt>&nbsp; May 09 18:12:52 [2104]: Request: GET http://iie.fing.edu.uy/
HTTP/1.0</tt></dt>

<dt>
Si el dominio propio es nsk.com.uy, escribir un script que cuente las solicitudes
(l&iacute;neas conteniendo "Connect:") para cada m&aacute;quina del dominio.
La salida ser&aacute; similar a</dt>

<dt>
<tt>&nbsp; 124&nbsp;&nbsp;&nbsp; nautilus.nsk.com.uy</tt></dt>

<dt>
<tt>&nbsp; 2156&nbsp;&nbsp; tisanuro.nsk.com.uy</tt></dt>
</div>

<div STYLE="margin-bottom: 0in">
<dt>
(10 puntos)</dt>
</div>

<dt>
<tt>&nbsp;</tt></dt>

<dt>
<tt>#!/bin/bash</tt></dt>

<dt>
<tt># cuenta solicitudes p&aacute;ginas web para cada m&aacute;quina</tt></dt>

<dt>
<tt>#&nbsp;&nbsp; del dominio nsk.com.uy</tt></dt>

<dt>
</dt>

<dt>
<tt>cat /var/log/tinyproxy.log | grep "nsk.com.uy" | \</tt></dt>

<dt>
<tt>&nbsp; grep "Connect:" | cut -d " " -f6 | sort | uniq -c</tt></dt>

<dt>
&nbsp;</dt>

<dt>
<font size=+2>2.</font> El programa gr&aacute;fico <tt>dia</tt> dispone
de una opci&oacute;n <tt>-e</tt> que transforma un archivo en formato propio
(extensi&oacute;n .dia) en PostScript (extensi&oacute;n .ps). Ejemplo:</dt>

<dt>
<tt>&nbsp; dia -e ejemplo.dia ejemplo.ps</tt></dt>

<dt>
El programa convert transforma archivos de distintos formatos unos en otros,
en particular de PostScript a imgen JPG, opcionalmente con cambio de tama&ntilde;o.
Ejemplo:</dt>

<dt>
<tt>&nbsp; convert -geometry 640x480 ejemplo.ps ejemplo.jpg</tt></dt>

<dt>
Buscar en el directorio y todos sus subdirectorios todos los archivos de
extensi&oacute;n .d&iacute;a y crear archivos transformados a PostScript
e imagen JPG, siguiendo los ejemplos dados. Los nuevos archivos deben quedar
en el mismo directorio o subdirectorio donde est&aacute;n sus originales
.dia.</dt>

<dt>
<b>Sugerencia:</b> para probar en m&aacute;quina crear subdirectorios y
archivos vac&iacute;os .dia y sustituir las conversiones (<tt>dia</tt>
y <tt>convert</tt>) por comandos de copia apropiados. (20 puntos)</dt>

<dt>
&nbsp;</dt>

<dt>
<tt>#!/bin/bash</tt></dt>

<dt>
<tt># busca en subdirectorios archivos .dia y los convierte</tt></dt>

<dt>
<tt>#&nbsp;&nbsp; primero a .ps y luego a .jpg generando nuevos archivos
en</tt></dt>

<dt>
<tt>#&nbsp;&nbsp; los mismos subdirectorios</tt></dt>

<dt>
&nbsp;</dt>

<dt>
<tt>clear</tt></dt>

<dt>
<tt>echo</tt></dt>

<dt>
<tt>echo "DIA - Conversi&oacute;n de archivos a JPG"</tt></dt>

<dt>
<tt>LISTA=`find . -name "*.dia" -print`</tt></dt>

<dt>
<tt>echo $LISTA</tt></dt>

<dt>
<tt>if [ -z "$LISTA" ]</tt></dt>

<dt>
<tt>then</tt></dt>

<dt>
<tt>&nbsp; echo "No hay archivos a convertir."</tt></dt>

<dt>
<tt>&nbsp; echo</tt></dt>

<dt>
<tt>&nbsp; exit</tt></dt>

<dt>
<tt>fi</tt></dt>

<dt>
&nbsp;</dt>

<dt>
<tt>echo "Convirtiendo..."</tt></dt>

<dt>
<tt>for ARCH in $LISTA</tt></dt>

<dt>
<tt>do</tt></dt>

<dt>
<tt>&nbsp; NOMBRE=`echo $ARCH | cut -d "." -f1-2`</tt></dt>

<dt>
<tt>&nbsp; NOMBREPS=$NOMBRE.eps</tt></dt>

<dt>
<tt>&nbsp; NOMBREJPG=$NOMBRE.jpg</tt></dt>

<dt>
<tt>&nbsp; echo -n "$ARCH a PostScript... "</tt></dt>

<dt>
<tt>&nbsp; #/usr/bin/X11/dia -e $NOMBREPS $ARCH</tt></dt>

<dt>
<tt>&nbsp; cp $ARCH $NOMBREPS</tt></dt>

<dt>
<tt>&nbsp; echo -n " a JPG... "</tt></dt>

<dt>
<tt>&nbsp; #/usr/bin/X11/convert -geometry 600 $NOMBREPS $NOMBREJPG</tt></dt>

<dt>
<tt>&nbsp; cp $NOMBREPS $NOMBREJPG</tt></dt>

<dt>
<tt>&nbsp; echo "hecho."</tt></dt>

<dt>
<tt>done</tt></dt>

<dt>
&nbsp;</dt>

<dt>
<font size=+2>3.</font> Escribir un script para determinar el tipo de archivo:
recibe como par&aacute;metro una ruta hacia un nombre de archivo y determina
si es un archivo regular, un directorio, un enlace simb&oacute;lico, un
dispositivo de caracter o un dispositivo de bloque; para otros tipos de
archivo dir&aacute; "archivo de tipo desconocido". Si el archivo no existe,
emite un mensaje "archivo inexistente" y devuelve un c&oacute;digo de error
1. Si no se ingresa nombre de archivo, emite un mensaje "par&aacute;metros
insuficientes" y devuelve c&oacute;digo de error 2.</dt>

<dt>
<b>Sugerencia:</b> para determinar existencia del archivo usar opci&oacute;n
-e de test. (20 puntos)</dt>

<dt>
&nbsp;</dt>

<dt>
<font face="Courier, monospace">#!/bin/bash<br>
# recibe como par&aacute;metro un nombre de archivo<br>
# determina el tipo de archivo&nbsp;<br>
# devuelve 0 si el archivo existe<br>
# devuelve 1 si el archivo no existe<br>
# devuelve 2 si no se indica el archivo como par&aacute;metro<br>
&nbsp;<br>
ARCH=$1<br>
&nbsp;<br>
if [ "$#" -lt 1 ]<br>
then<br>
&nbsp; echo "N&uacute;mero insuficiente de par&aacute;metros;"<br>
&nbsp; echo "&nbsp; debe indicar una ruta a un archivo."<br>
&nbsp; exit 2<br>
elif [ ! -e "$1" ]<br>
then<br>
&nbsp; echo "ERROR: $ARCH no existe."<br>
&nbsp; exit 1<br>
fi<br>
&nbsp;<br>
echo -n "$ARCH es un "<br>
PRIMERLETRA=`ls -dl $ARCH | cut -c1`<br>
&nbsp;<br>
case $PRIMERLETRA in<br>
l) echo "enlace simb&oacute;lico";;<br>
d) echo "directorio";;<br>
-) echo "archivo regular";;<br>
b) echo "dispositivo de bloque";;<br>
c) echo "dispositivo de caracter";;<br>
*) echo "archivo de tipo desconocido";;<br>
esac</font></dt>

<dt>
<font face="Courier, monospace"></font></dt>

</body>
</html>
