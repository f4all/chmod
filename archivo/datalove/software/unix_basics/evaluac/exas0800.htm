<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.07 [en] (X11; I; Linux 2.0.36 i686) [Netscape]">
   <META NAME="AUTHOR" CONTENT="Victor Gonzalez-Barbone">
   <META NAME="CREATED" CONTENT="19990225;10362500">
   <META NAME="CHANGEDBY" CONTENT="Victor Gonzalez-Barbone">
   <META NAME="CHANGED" CONTENT="19990225;10362500">
<STYLE>
	<!--
		@page { margin-left: 2.50cm; margin-right: 1.50cm; margin-top: 1.50cm; margin-bottom: 1.50cm }
	-->
	</STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000EF" VLINK="#51188E" ALINK="#FF0000">

<H5>
Centro de Inform&aacute;tica<BR>
Sistemas Operativos II</H5>

<CENTER>
<H2>
Examen Agosto 2000.</H2></CENTER>

<CENTER><B>Soluci&oacute;n de scripts.</B></CENTER>

<P><BR>
<H3>
<FONT SIZE=+1>Parte A. Sin consulta de material (40 puntos).</FONT></H3>

<DT>
Responder brevemente las siguientes preguntas (4 puntos cada una).</DT>

<DT>
<B>1.</B> Explicar el uso del comando <TT>exit</TT> en programaci&oacute;n.
&iquest;Para qu&eacute; sirven los valores de retorno? &iquest;C&oacute;mo
se interrogan?</DT>

<DT>
<B>2</B>. &iquest;Qu&eacute; diferencia hay entre programa, archivo y proceso?
&iquest;Qu&eacute; relaci&oacute;n hay entre ellos?</DT>

<DT>
<B>3.</B> &iquest;Qu&eacute; es el UID? &iquest;Qu&eacute; es el GID?</DT>

<DT>
<B>4.</B> &iquest;Qu&eacute; funci&oacute;n cumple el archivo /etc/passwd?
&iquest;Qu&eacute; contiene cada l&iacute;nea?</DT>

<DT>
Escribir comandos para realizar las tareas indicadas:</DT>

<DT>
<B>1.</B> Fijar, en modo simb&oacute;lico y absoluto, los permisos del
archivo /usr/local/bin/conectar de modo que todos lo puedan ejecutar, el
usuario lo pueda leer y escribir, y el grupo lo pueda leer.</DT>

<DT>
<B>2.</B> Crear, en el subdirectorio bin del directorio propio, un enlace
simb&oacute;lico al script /usr/local/bin/conectar con nombre conec.</DT>

<DT>
<B>3. </B>Crear en el subdirectorio bin del directorio propio, un enlace
hard hacia el script may2min ubicado bajo utils en el directorio propio.</DT>

<DT>
Sea la siguiente salida de ls -l:</DT>

<DT>
<TT>-rw-r--r--&nbsp;&nbsp; 1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
33280 jun 12 19:40 Carta.doc</TT></DT>

<DT>
<TT>drwxrwxrwx&nbsp;&nbsp; 5 victor&nbsp;&nbsp; staff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1024 dic&nbsp; 4&nbsp; 1999 step</TT></DT>

<DT>
<TT>drwxrwxr-x&nbsp; 22 victor&nbsp;&nbsp; staff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1024 nov 20&nbsp; 1999 Office51</TT></DT>

<DT>
<TT>drwxr-x---&nbsp;&nbsp; 6 victor&nbsp;&nbsp; staff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1024 may&nbsp; 7 16:43 argos</TT></DT>

<DT>
<TT>drwxrwxr--&nbsp; 21 victor&nbsp;&nbsp; staff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1024 jul 11 18:22 bajados</TT></DT>

<DT>
<TT>-rw-rw----&nbsp;&nbsp; 3 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
542 jul 13 11:26 boor.exe</TT></DT>

<DT>
<TT>drwxrwxrwt&nbsp;&nbsp; 3 victor&nbsp;&nbsp; staff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1024 may 25 10:02 borrador</TT></DT>

<DT>
<TT>-rwsrwsr-x&nbsp;&nbsp; 1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
9218 jun 12 19:41 pph3</TT></DT>

<DT>
<TT>drwxrwx--x&nbsp;&nbsp; 2 victor&nbsp;&nbsp; victor&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1024 may&nbsp; 7 16:47 cdir</TT></DT>

<DT>
<TT>-rw-rw-r--&nbsp;&nbsp; 3 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
542 jul 13 11:26 mysql-doc</TT></DT>

<DT>
<TT>-rw-r-xr--&nbsp;&nbsp; 3 victor&nbsp;&nbsp; staff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1084 ago&nbsp; 1 10:01 ver.exe</TT></DT>

<DT>
<TT>-rwxr-xr-x&nbsp;&nbsp; 3 victor&nbsp;&nbsp; staff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1084 ago&nbsp; 1 10:01 ver</TT></DT>

<DT>
<TT>drwxr-xr-x&nbsp;&nbsp; 7 victor&nbsp;&nbsp; victor&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1024 jul 25 11:48 lit</TT></DT>

<DT>
<B>4.</B> Indicar, si los hay,</DT>

<DT>
&nbsp; a) directorios p&uacute;blicos;</DT>

<DT>
&nbsp; c) archivos ejecutables;</DT>

<DT>
&nbsp; d) directorios recorribles por todo el mundo;</DT>

<DT>
<B>5.</B> Indicar, si los hay,</DT>

<DT>
&nbsp; e) directorios donde el grupo puede borrar archivos;</DT>

<DT>
&nbsp; g) archivos que son enlaces simb&oacute;licos.</DT>

<DT>
<B>6. </B>Indicar, si los hay,</DT>

<DT>
&nbsp; f) archivos ejecutables con permisos de root;</DT>

<DT>
&nbsp; b) archivos que tienen enlaces hard;</DT>

<H3>
<FONT SIZE=+1>Parte B. Con libre consulta de material (76 puntos).</FONT></H3>

<DT>
<FONT SIZE=+2>1. </FONT>Para definir un nuevo alias de correo, es preciso
insertar en el archivo /etc/aliases una l&iacute;na de la forma</DT>

<DT>
<TT>&nbsp; tecnicos:jperez,hvila,pgarcia</TT></DT>

<DT>
donde el primer nombre es el alias, luego el separador de campo ":" y finalmente
la lista de usuarios a incluir en el alias, separada por comas y sin espacios.
Escribir un script para crear un alias de correo. El script deber&aacute;:</DT>

<UL>
<LI>
pedir el nombre del nuevo alias;</LI>

<LI>
verificar si ya existe, en cuyo caso emitir&aacute; un mensaje de error
y terminar&aacute;.</LI>

<LI>
solicitar el ingreso de nombres de usuario hasta recibir un nombre en blanco.</LI>

<LI>
mostrar la lista de usuarios separada por comas y pedir confirmaci&oacute;n.</LI>

<LI>
si el usuario confirma, agregar la l&iacute;nea a incluir en /etc/aliases
y ejecutar el comando /usr/bin/newaliases; si no, terminar.</LI>
</UL>
(20 puntos)
<DT>
<TT>#!/bin/bash</TT></DT>

<DT>
<TT># prob1: da un alta de alias para correo.</TT></DT>

<DT>
<TT>#</TT></DT>

<DT>
<TT>clear</TT></DT>

<DT>
<TT>echo "Crear Alias de Correo:"</TT></DT>

<DT>
<TT>echo</TT></DT>

<DT>
<TT>echo -n "Nombre alias: "</TT></DT>

<DT>
<TT>read NOMALIAS</TT></DT>

<DT>
<TT>if [ `grep ^$NOMALIAS /etc/aliases` ]</TT></DT>

<DT>
<TT>then</TT></DT>

<DT>
<TT>&nbsp; echo Ese alias ya existe.</TT></DT>

<DT>
<TT>&nbsp; exit 1</TT></DT>

<DT>
<TT>fi</TT></DT>

<DT>
<TT>echo</TT></DT>

<DT>
<TT>echo Ingrese nombres de usuarios a incluir en alias $NOMALIAS</TT></DT>

<DT>
<TT>echo Digite Enter con nombre en blanco para finalizar.</TT></DT>

<DT>
<TT>echo</TT></DT>

<DT>
<TT>echo -n "Nombre: "</TT></DT>

<DT>
<TT>read NOMBRE</TT></DT>

<DT>
<TT>LINEA=""</TT></DT>

<DT>
<TT>while [ $NOMBRE ]</TT></DT>

<DT>
<TT>do</TT></DT>

<DT>
<TT>&nbsp; if [ $LINEA ]</TT></DT>

<DT>
<TT>&nbsp; then</TT></DT>

<DT>
<TT>&nbsp;&nbsp;&nbsp; # l&iacute;nea ya tiene algo</TT></DT>

<DT>
<TT>&nbsp;&nbsp;&nbsp; LINEA=$LINEA","$NOMBRE</TT></DT>

<DT>
<TT>&nbsp; else</TT></DT>

<DT>
<TT>&nbsp;&nbsp;&nbsp; # l&iacute;nea vac&iacute;a, coloca el primer nombre</TT></DT>

<DT>
<TT>&nbsp;&nbsp;&nbsp; LINEA=$NOMBRE</TT></DT>

<DT>
<TT>&nbsp; fi</TT></DT>

<DT>
<TT>&nbsp; echo -n "Nombre: "</TT></DT>

<DT>
<TT>&nbsp; read NOMBRE</TT></DT>

<DT>
<TT>done</TT></DT>

<DT>
<TT>echo</TT></DT>

<DT>
<TT>echo Se incluir&aacute;n los siguientes nombres en alias $NOMALIAS:</TT></DT>

<DT>
<TT>echo $LINEA</TT></DT>

<DT>
<TT>echo -n "Est&aacute; bien?(S/n): "</TT></DT>

<DT>
<TT>read RESP</TT></DT>

<DT>
<TT>if [ $RESP = "s" -o $RESP = "S" ]</TT></DT>

<DT>
<TT>then</TT></DT>

<DT>
<TT>&nbsp; echo $NOMALIAS":"$LINEA >> /etc/aliases</TT></DT>

<DT>
<TT>&nbsp; /usr/bin/newaliases</TT></DT>

<DT>
<TT>else</TT></DT>

<DT>
<TT>&nbsp; echo No se cre&oacute; el alias.</TT></DT>

<DT>
<TT>fi</TT></DT>

<DT>
<TT>&nbsp;</TT></DT>

<DT>
<FONT SIZE=+2>2.</FONT> El archivo <TT>bedelia.lst</TT> contiene una lista
de grupos de alumnos donde el primer campo es el nombre del grupo. En el
sistema debe existir una cuenta de usuario con ese mismo nombre. Escribir
un script para verificar que todos los grupos de bedel&iacute;a tienen
una cuenta de usuario. El script deber&aacute; mandar un correo al usuario
cdiadmin@cdi.edu.uy con el encabezamiento</DT>

<DT>
<TT>&nbsp; # Alumnos faltantes en el sistema</TT></DT>

<DT>
<TT>&nbsp; # seg&uacute;n lista de Bedel&iacute;a</TT></DT>

<DT>
seguido de la lista de nombres de grupo carentes de cuenta de usuario en
el sistema. Sugerencia: crear un archivo auxiliar y luego borrarlo. (15
puntos)</DT>

<DT>
&nbsp;</DT>

<DT>
<TT>#!/bin/bash</TT></DT>

<DT>
<TT># prob2: lista usuarios faltantes seg&uacute;n lista de bedel&iacute;a</TT></DT>

<DT>
<TT>#</TT></DT>

<DT>
<TT>clear</TT></DT>

<DT>
<TT>echo "# Alumnos faltantes en el sistema" > faltan.lst</TT></DT>

<DT>
<TT>echo "# seg&uacute;n lista de Bedel&iacute;a" >> faltan.lst</TT></DT>

<DT>
<TT>echo "#" >> faltan.lst</TT></DT>

<DT>
<TT>LISTA=`cat bedelia.lst | cut -d: -f1`</TT></DT>

<DT>
<TT>for ALUMNO in $LISTA</TT></DT>

<DT>
<TT>do</TT></DT>

<DT>
<TT>&nbsp; id $ALUMNO 1>/dev/null 2>&amp;1</TT></DT>

<DT>
<TT>&nbsp; if [ $? -ne 0 ]</TT></DT>

<DT>
<TT>&nbsp; then</TT></DT>

<DT>
<TT>&nbsp;&nbsp;&nbsp; echo $ALUMNO >> faltan.lst</TT></DT>

<DT>
<TT>&nbsp; fi</TT></DT>

<DT>
<TT>done</TT></DT>

<DT>
<TT>mail -s "Usuarios faltantes" cdiadmin@cdi.edu.uy &lt; faltan.lst</TT></DT>

<DT>
<TT>rm faltan.lst</TT></DT>

<DT>
<TT>&nbsp;</TT></DT>

<DT>
<FONT SIZE=+2>3. </FONT>Escribir un script que presente un men&uacute;
de alternativas para conexi&oacute;n a Internet, con este aspecto:</DT>

<DT>
<TT>&nbsp; 1.Adinet.</TT></DT>

<DT>
<TT>&nbsp; 2.Uruguaynet.</TT></DT>

<DT>
<TT>&nbsp; 3.Multired.</TT></DT>

<DT>
<TT>&nbsp; 4.Technet.</TT></DT>

<DT>
<TT>&nbsp; 0.Fin.</TT></DT>

<DT>
<TT>&nbsp; Opci&oacute;n:</TT></DT>

<DT>
El usuario digitar&aacute; el n&uacute;mero de opci&oacute;n. La conexi&oacute;n
se realiza mediante el script /usr/bin/pon (PPP on) seguida del nombre
de la opci&oacute;n elegida en min&uacute;sculas. Si el usuario elige Fin,
la conexi&oacute;n se corta con el script /usr/bin/poff (PPP off) sin par&aacute;metros.
(15 puntos)</DT>

<DT>
&nbsp;</DT>

<DT>
<TT>#!/bin/bash</TT></DT>

<DT>
<TT># prob3: men&uacute; de conexi&oacute;n a Internet</TT></DT>

<DT>
<TT># presentaci&oacute;n del men&uacute;</TT></DT>

<DT>
<TT>clear</TT></DT>

<DT>
<TT>echo Men&uacute; de conexi&oacute;n a Internet.</TT></DT>

<DT>
<TT>echo Elija una alternativa:</TT></DT>

<DT>
<TT>echo "&nbsp; 1. Adinet."</TT></DT>

<DT>
<TT>echo "&nbsp; 2. Uruguaynet."</TT></DT>

<DT>
<TT>echo "&nbsp; 3. Miltired."</TT></DT>

<DT>
<TT>echo "&nbsp; 4. Technet."</TT></DT>

<DT>
<TT>echo "&nbsp; 0. Fin conexi&oacute;n."</TT></DT>

<DT>
<TT>echo -n "Opci&oacute;n: "</TT></DT>

<DT>
<TT>read OPCION</TT></DT>

<DT>
<TT>case $OPCION in</TT></DT>

<DT>
<TT>1)</TT></DT>

<DT>
<TT>&nbsp; /usr/bin/pon adinet;;</TT></DT>

<DT>
<TT>2)</TT></DT>

<DT>
<TT>&nbsp; /usr/bin/pon uruguaynet;;</TT></DT>

<DT>
<TT>3)</TT></DT>

<DT>
<TT>&nbsp; /usr/bin/pon multired;;</TT></DT>

<DT>
<TT>4)</TT></DT>

<DT>
<TT>&nbsp; /usr/bin/pon technet;;</TT></DT>

<DT>
<TT>0)</TT></DT>

<DT>
<TT>&nbsp; /usr/bin/poff;;</TT></DT>

<DT>
<TT>*)</TT></DT>

<DT>
<TT>&nbsp; echo Opci&oacute;n incorrecta.</TT></DT>

<DT>
<TT>esac</TT></DT>

</BODY>
</HTML>
