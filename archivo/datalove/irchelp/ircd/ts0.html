<!doctype html>
<html>

<!-- Mirrored from www.irchelp.org/irchelp/ircd/ts0.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 29 Dec 2013 06:58:00 GMT -->
<head>
    <title>IRCHelp.org &mdash; Untitled Page</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="description" content="Comprehensive information on everything Internet Relay Chat" />
    <meta name="author" content="irchelpers" />
    <meta name="generator" content="PieCrust 1.0.0-dev" />
    <meta name="template-engine" content="Twig" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,
      initial-scale=1.0">
    <!-- Le styles -->
    <link href="http://www.irchelp.org/css/bootstrap.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
    </style>
    <link href="http://www.irchelp.org/css/bootstrap-responsive.css" rel="stylesheet">
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144"
      href="http://www.irchelp.org/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114"
      href="http://www.irchelp.org/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72"
      href="http://www.irchelp.org/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed"
      href="http://www.irchelp.org/ico/apple-touch-icon-57-precomposed.png">
    <link rel="shortcut icon" href="http://www.irchelp.org/ico/favicon.png">
</head>
<body>
    <!--Start of navigation-->
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container"> <a class="btn btn-navbar"
            data-toggle="collapse" data-target=".nav-collapse"> <span
              class="icon-bar"></span> <span class="icon-bar"></span> <span
              class="icon-bar"></span> </a> <a class="brand" href="http://www.irchelp.org/">#irchelp</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="active"><a href="http://www.irchelp.org/">Home</a></li>
              <li><a href="../credit.html">About</a></li>
              <li class="dropdown"> <a href="../clients/index.html" class="dropdown-toggle"
                  data-toggle="dropdown">Clients </a>
                <ul class="dropdown-menu">
                  <li><a href="../clients/index.html">All Clients</a></li>
                  <li class="divider"></li>
                  <li class="nav-header">Windows</li>
                  <li><a href="../clients/windows/mirc/index.html">mIRC</a></li>
                  <li><a href="../clients/windows/xchat.html">XChat</a></li>
                  <li><a href="../clients/windows.html">All Windows Clients</a></li>
                  <li class="divider"></li>
                  <li class="nav-header">MacOS X</li>
                  <li><a href="../clients/mac/textual.html">Textual</a></li>
                  <li><a href="../clients/mac/colloquy.html">Colloquy</a></li>
                  <li><a href="../clients/mac/snak.html">Snak</a></li>
                  <li><a href="../clients/mac.html">All MacOS X Clients</a></li>
                  <li class="divider"></li>
                  <li class="nav-header">Linux/Unix Terminal</li>
                  <li><a href="../clients/unix/irssi/index.html">irssi</a></li>
                  <li><a href="../clients/unix/epic.html">EPIC</a></li>
                  <li><a href="../clients/unix/ircii/index.html">ircII</a></li>
                  <li><a href="../clients/unix/index.html#terminal">All Linux/Unix Terminal Clients</a></li>
                  <li class="divider"></li>
                  <li class="nav-header">Linux/Unix Graphical</li>
                  <li><a href="../clients/unix/xchat.html">XChat</a></li>
                  <li><a href="../clients/unix/konversation.html">Konversation</a></li>
                  <li><a href="../clients/unix/index.html#gui">All Linux/Unix Graphical Clients</a></li>
                  <li class="nav-header">Smartphones</li>
                  <li><a href="../clients/mobile/android/index.html">Clients for Android</a></li>
                  <li><a href="../clients/mobile/ios.html">Clients for iOS</a></li>
                  <li><a href="../clients/mobile.html">All Smartphone Clients</a></li>
                  <li class="nav-header">Other OS and Crossplatform</li>
                  <li><a href="../clients/cross/java.html">Clients writting in Java</a></li>
                  <li><a href="../clients/cross.html">Other Crossplatform Clients</a></li>
                  <li><a href="../clients/otheros/index.html">Clients for other Operating Systems</a></li>
                  <li><a href="../clients/webclients.html">Web-based clients</a></li>

                </ul>
              </li>
              <li class="dropdown"> <a href="../networks/index.html" class="dropdown-toggle"
                  data-toggle="dropdown">Networks </a>
                <ul class="dropdown-menu">
                  <li><a href="../networks/popular.html">Major Networks</a></li>
                  <li><a href="../networks/regional.html">Regional Networks</a></li>
                  <li><a href="../networks/topical.html">Topical Networks</a></li>
                  <li><a href="../networks/index.html">All Networks</a></li>
                  <li class="divider"></li>
                  <li class="nav-header">Major Networks</li>
                  <li><a href="../networks/efnet/index.html">EFNet</a></li>
                  <li><a href="../networks/undernet.html">Undernet</a></li>
                  <li><a href="../networks/dalnet.html">Dalnet</a></li>
                  <li><a href="../networks/quakenet.html">Quakenet</a></li>
                  <li><a href="../networks/freenode.html">Freenode</a></li>
                </ul>
              </li>
              <li class="dropdown"> <a href="../security/index.html" class="dropdown-toggle"
                  data-toggle="dropdown">Security </a>
                <ul class="dropdown-menu">
                  <li><a href="../security/index.html">General Security</a></li>
                  <li><a href="../security/privacy.html">Privacy</a></li>
                  <li><a href="../security/nuke.html">Denial of Service</a></li>
                  <li><a href="../security/trojan.html">Trojan Horses and Other Malware</a></li>
                  <li><a href="../security/socialeng.html">Social Engineering</a></li>
                </ul>
              </li>
              <li class="dropdown"> <a href="index.html" class="dropdown-toggle"
                  data-toggle="dropdown">Servers </a>
                <ul class="dropdown-menu">
                  <li><a href="index.html">General ircd information</a></li>
                  <li class="divider"></li>
                  <li class="nav-header">EFNet IRCDs</li>
                  <li><a href="ratbox/index.html">ircd-ratbox</a></li>
                  <li><a href="hybrid/index.html">ircd-hybrid</a></li>
                </ul>
              </li>
              <li class="dropdown"> <a href="#" class="dropdown-toggle"
                  data-toggle="dropdown">FAQs </a>
                <ul class="dropdown-menu">
                  <li><a href="../new2irc.html">New user introduction</a></li>
<!--
                  <li><a href="#">Another action</a></li>
                  <li><a href="#">Something else here</a></li>
                  <li class="divider"></li>
                  <li class="nav-header">Nav header</li>
                  <li><a href="#">Separated link</a></li>
                  <li><a href="#">One more separated link</a></li>
-->
                </ul>
              </li>
              <li class="dropdown"> <a href="../library.html" class="dropdown-toggle"
                  data-toggle="dropdown">Library </a>
                <ul class="dropdown-menu">
                  <li><a href="../library.html">Index</a></li>
<!--
                  <li><a href="#">Another action</a></li>
                  <li><a href="#">Something else here</a></li>
                  <li class="divider"></li>
                  <li class="nav-header">Nav header</li>
                  <li><a href="#">Separated link</a></li>
                  <li><a href="#">One more separated link</a></li>
-->
                </ul>
              </li>
            </ul>
            <form class="navbar-form pull-right"> <input class="span2"
                placeholder="Search" type="text"> <button type="submit"
                class="btn">Search</button> </form>
          </div>
          <!--/.nav-collapse --> </div>
      </div>
    </div>
<!--end of navigation-->

    <div id="container" class="container">
<!--
                        <h1><a href="/">Untitled Page</a></h1>
            -->        
        
            <div class="content">
                                <h1>The Channel Timestamp (TS) Zero Problem</h1>

<p>by Joseph Lo aka Jolo, last updated Aug 6, 2002</p>

<p>&#8221;Note&#8221;: TS0 has largely disappeared from IRC networks, with the last major
network where it commonly appeared (EFNet) being updated several years ago
with protocol changes which automatically updated TS0 channels to have a valid, 
current timestamp. The TS0 problem, is thus, a relic of thie past, and this document is largely
historic.</p>

<h2>What is a TS?</h2>

<p>On EFnet, every channel has a timestamp or TS, which is the date and time that
the channel was most recently created. Think of it as the channel birthday.
The TS is very important to your channel&#8217;s security. When servers split and
rejoin, they use the channel TS on both sides of the split to resolve any
conflicting channel modes, including who was originally an op.</p>

<p>Consider the common scenario where server X splits due to some networking
problems. Server X temporarily becomes a separate IRC network of its own. If
nobody on your channel happened to be on server X before the split, then your
channel will no longer exist there. From the point of view of server X,
everybody on your channel just /quit all at once. Anybody on server X can then
just /join your channel and recreate it from scratch, thus getting channel
ops. (Most EFnet servers should prevent this now, but glitches are always
possible.) When server X rejoins the rest of the network, whichever side with
the older TS is considered the original one, and the modes are synchronized
back to the way they were. In our example, the servers would fix things on the
newer channel by removing ops from any new ops and undoing any other mode
changes set on server X. Everything then goes on normally.</p>

<p>If somebody in your channel was on server X during the split, your channel
stays open. When the two sides rejoin, the two TS&#8217;s are the same, so there is
no problem. This is a good reason to spread your ops around on as many
different servers as possible.</p>

<h2>What is the TS 0 problem?</h2>

<p>Many years ago, before the current TS protocol was implemented, most channels
had a TS of 0 (zero), which was the default value. (Zero is the beginning of
time essentially, which for IRC servers running UNIX operating systems, is
defined to be 00:00:00 GMT, January 1, 1970.) If a split channel rejoins and
both sides have TS of 0, both sides are just as authoritative, so in the above
example, no ops would be deoped. It was thus fairly easy for somebody to take
over a channel by &#8220;riding a split&#8221;. Fortunately this ended with the
implementation of TS, until now.</p>

<p>Twice in March 2001, crackers (&#8220;hackers&#8221;) were able to link a bogus EFnet
server into the network. They manipulated the TS on that server and reset it
back to 0. The older TS always wins, and there is nothing older than the
beginning of time itself. So when the hacked server was linked in, many
channels had their TS reset from their legitimate creation dates all the way
back to 0. This made them vulnerable to takeovers using the aforementioned
split-riding technique.</p>

<h2>How do I tell if my channel TS was reset to 0?</h2>

<p>On most clients, you can check your TS with the command <code>/mode #channelname</code>,
which should show your channel&#8217;s current modes and when it was created. The
result may be shown on your status screen, console window, etc. For example:</p>

<pre><code>    /mode #irchelp
    *** Mode for channel #irchelp is "+tnl 25"
    *** #irchelp - created Sat Mar 24 03:56:59 2001
</code></pre>

<p>If the year is 1969 or 1970, then TS has been set back to 0 (it may be
slightly different due to time zones). AFAIK older versions of mIRC does not
show the TS if it is 0, so if you see your channel&#8217;s modes but no date, you
have a problem. When in doubt, ask somebody not using mIRC to check for you.</p>

<h2>How do I fix the TS 0 problem?</h2>

<p>The <strong>only</strong> way to fix this is to &#8220;cycle&#8221; your channel: clear everybody out
and recreate it from scratch. The TS will then be set to the current time and
you&#8217;ll be safe. The danger of course is that whoever gets back in first is the
new owner of the channel, so you need to maximize the chances that it&#8217;s one of
your ops. Here&#8217;s the recommended way to do this.</p>

<ol>
<li>Wait until things are pretty quiet such as at night, and arrange to have a few experienced ops to help. You don&#8217;t want to do this while a lot of visitors are coming and going. </li>
<li>Make sure there are no splits in progress. Use <code>/lusers</code> to see if all 40 or so servers are linked. Use <code>/ping #channelname</code> to see if anybody is lagging and thus likely to split soon. If you proceed during a split, this will either not work, or you may even lose your channel! </li>
<li>Set <code>/mode #channelname +i</code> (invite only) to deter new vistors and auto-rejoining clients. </li>
<li>Get people to leave the channel and to stay away for at least 15 minutes, by asking nicely first, then by kicking if necessary. </li>
<li>When you are down to just the few experienced ops who are awake and each have one client left, wait a few minutes more. You can optionally go -i for a minute to see if anybody else is trying to sneak in. </li>
<li>If you use channel maintenance bots which know how to auto-cycle the channel, get all but one bot out. Make sure the bot&#8217;s owner is around in case you need manual intervention. Then everybody should just leave and not rejoin for a minute to let the bot have time to cycle the channel. </li>
<li>If you don&#8217;t use bots, just cycle the channel the old fashioned way. When you think the coast is clear, on the count of 3, all of you should leave and immediately try to rejoin the channel. By making it a race, you improve the chances that one of you is the winner instead of some outsider. It doesn&#8217;t matter which of you wins. </li>
<li>The winner re-distributes ops carefully to other authorized people. Don&#8217;t forget to reset channel modes including topic, bans, etc. </li>
</ol>

<p>If you&#8217;re not sure you can handle it, seek help with #irchelp. Be sure the
person you talk to is an op (@ by their nick) before trusting them.</p>

<h2>Will this happen again?</h2>

<p>Who knows. We are always only as safe as our weakest link. Just be vigilant
and keep an eye out on your channel TS, and reset it if necessary. If you are
experienced with IRC bots or scripting, it is a good idea to have some
automated means of checking all ops to make sure they belong to your
authorized ops list. It takes considerable IRC experience and resources to
maintain a channel, so good luck. If you don&#8217;t feel up to the task, there&#8217;s
always DALnet. :-)</p>

<hr />

<p>[ <a href="../index.html">go back</a> | <a href="../search_engine.html">search</a> |
<a href="../help.html">help</a> | <a href="../mail.html">send email</a> ]</p>

<p><a href="../credit.html">all pages (C) IRCHELP.ORG or original authors</a></p>

                            </div>
        
        <footer>

                        <p>All documents © irchelp.org or original authors 2012 <br />Baked with <em><a href="http://bolt80.com/piecrust/">PieCrust</a> 1.0.0-dev</em>.</p>
                    </footer>
    </div>
    
        <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="http://www.irchelp.org/js/jquery.js"></script>
    <script src="http://www.irchelp.org/js/bootstrap-transition.js"></script>
    <script src="http://www.irchelp.org/js/bootstrap-alert.js"></script>
    <script src="http://www.irchelp.org/js/bootstrap-modal.js"></script>
    <script src="http://www.irchelp.org/js/bootstrap-dropdown.js"></script>
    <script src="http://www.irchelp.org/js/bootstrap-scrollspy.js"></script>
    <script src="http://www.irchelp.org/js/bootstrap-tab.js"></script>
    <script src="http://www.irchelp.org/js/bootstrap-tooltip.js"></script>
    <script src="http://www.irchelp.org/js/bootstrap-popover.js"></script>
    <script src="http://www.irchelp.org/js/bootstrap-button.js"></script>
    <script src="http://www.irchelp.org/js/bootstrap-collapse.js"></script>
    <script src="http://www.irchelp.org/js/bootstrap-carousel.js"></script>
    <script src="http://www.irchelp.org/js/bootstrap-typeahead.js"></script>
</body>

<!-- Mirrored from www.irchelp.org/irchelp/ircd/ts0.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 29 Dec 2013 06:58:00 GMT -->
</html>
